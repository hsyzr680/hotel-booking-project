# ุฅุตูุงุญ ุงูุงุชุตุงู ุจูุงุนุฏุฉ Railway ูุชุดุบูู db push

## โ ููู Prisma (schema.prisma)

ุชู ุงูุชุญูู: ุงูุฅุนุฏุงุฏ ุตุญูุญ.

- `provider = "postgresql"`
- `url = env("DATABASE_URL")`
- ุงูุฌุฏุงูู: User, Hotel, Room, Booking, Review, Favorite

---

## โ ูุง ุญุฏุซ ุนูุฏ ุชุดุบูู db push

ุงูุฎุทุฃ:

```
P1001: Can't reach database server at `roundhouse.proxy.rlwy.net:12345`
```

ูุนูู: ูู ุฌูุงุฒู ูุง ูููู ุงููุตูู ุฅูู ุงูุฎุงุฏู ุนูู ูุฐุง ุงูุนููุงู ูุงููููุฐ.

---

## ๐ง ุงูุณุจุจ ุงูุฃุฑุฌุญ

ุงููููุฉ ุงูุญุงููุฉ ูู `.env` ุนูู ุฌูุงุฒู:

```
DATABASE_URL="postgresql://...@roundhouse.proxy.rlwy.net:12345/railway"
```

ุงุญุชูุงูุงุช:

1. **ุงูุฑุงุจุท ูู `.env` ูุง ุฒุงู ูุซุงูุงู ูุฏููุงู**  
   ูู ูุดุฑูุน ูู Railway ูู **Public URL** ุฎุงุต (host ู port ูุฎุชูููู). ูุฌุจ ุฃู ูููู ุงูุฑุงุจุท ูู ููุญุฉ Railway ููุดุฑูุนู ุฃูุช.

2. **ุชุญุฏูุซ ุงูุฑุงุจุท ูู Vercel ููุท**  
   ุฃูุฑ `npx prisma db push` ููุฑุฃ ูู **ููู `.env` ุงููุญูู**. ุฅุฐุง ุนุฏููุช ููุท ูู Vercel ููู ุชูุณุฎ ููุณ ุงูุฑุงุจุท ุฅูู `.env` ุนูู ุฌูุงุฒูุ ุณูุจูู ุงูุงุชุตุงู ููุดู ูู ุฌูุงุฒู.

---

## โ ุงูุญู (ุฎุทูุชุงู)

### 1) ุงูุชุฃูุฏ ูู ุงูุฑุงุจุท ุงูุตุญูุญ ูู `.env` ุนูู ุฌูุงุฒู

- ูู **Vercel**:  
  ูุดุฑูุนู โ Settings โ Environment Variables โ ุงูุณุฎ ูููุฉ `DATABASE_URL` ููุง ูู.

- ุฃู ูู **Railway**:  
  Dashboard โ ูุดุฑูุนู โ Postgres โ Connect โ ุงูุณุฎ **Public URL** (ููุณ Internal).

ุงูุตูุบุฉ ุงูุตุญูุญุฉ ุชุดุจู:

```
postgresql://postgres:PASSWORD@ุฃู.ูุถูู.rlwy.net:ูููุฐ/railway
```

ูุซุงู (ููู ูุฎุชููุฉ ููุดุฑูุนู):

```
postgresql://postgres:yibcjsBtGJbITBHCiutwnrRprRSyjdGL@viaduct.proxy.rlwy.net:54321/railway
```

- ุงูุชุญ ููู **`.env`** ูู ุฌุฐุฑ ุงููุดุฑูุน ุนูู ุฌูุงุฒู.
- ุงุฌุนู ุงูุณุทุฑ ุงููุญูุฏ ูู `DATABASE_URL` ูู ุงูุฑุงุจุท ุงูุฐู ูุณุฎุชู (ุจุฏูู ูุณุงูุงุช ุฒุงุฆุฏุฉ ุฃู ุนูุงูุงุช ุบุฑูุจุฉ).
- ุงุญูุธ ุงูููู.

### 2) ุชุดุบูู db push ูู ุฌูุงุฒู

ูู ูุฌูุฏ ุงููุดุฑูุน:

```bash
npx prisma generate
npx prisma db push
```

ุฅุฐุง ูุฌุญ ุงูุงุชุตุงู ุณุชุธูุฑ ุฑุณุงูุฉ ูุซู:

```
Your database is now in sync with your schema.
```

ุจุนุฏูุง ููููู ุชุดุบูู:

```bash
npm run db:seed
```

ูุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ุฅู ูุฌุฏุช.

---

## ๐ ููุฎุต

| ุงูุฎุทูุฉ | ูุงุฐุง ุชูุนู |
|--------|------------|
| 1 | ุงูุณุฎ `DATABASE_URL` ูู Vercel (ุฃู Public URL ูู Railway). |
| 2 | ุงูุตูู ูู `.env` ุนูู ุฌูุงุฒู ููุงู ุงููููุฉ ุงูุญุงููุฉ ูุงุญูุธ. |
| 3 | ูููุฐ: `npx prisma generate` ุซู `npx prisma db push`. |

ุจุนุฏ ูุฌุงุญ `db push` ุณุชููุดุฃ/ุชูุญุฏููุซ ุงูุฌุฏุงูู ูู Railwayุ ููุฌุจ ุฃู ูุฎุชูู ุฎุทุฃ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู (ุจุดุฑุท ุฃู ุงูุชุทุจูู ูุณุชุฎุฏู ููุณ `DATABASE_URL` ูู Vercel).
